/*! For license information please see npm.mpd-parser.93f4465a7929e67bc0a1.js.LICENSE.txt */
"use strict";(self.webpackChunknewton_school_web=self.webpackChunknewton_school_web||[]).push([[85963],{L0qr:(e,t,n)=>{function r(e){return e&&"object"===typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n("X8+f")),a=r(n("vgmO")),u=r(n("hQev")),o=n("KdhP"),s=function(e){return!!e&&"object"===typeof e},d=function e(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.reduce((function(t,n){return Object.keys(n).forEach((function(r){Array.isArray(t[r])&&Array.isArray(n[r])?t[r]=t[r].concat(n[r]):s(t[r])&&s(n[r])?t[r]=e(t[r],n[r]):t[r]=n[r]})),t}),{})},c=function(e){return e.reduce((function(e,t){return e.concat(t)}),[])},l=function(e){if(!e.length)return[];for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},f="INVALID_NUMBER_OF_PERIOD",m="DASH_EMPTY_MANIFEST",p="DASH_INVALID_XML",v="NO_BASE_URL",g="SEGMENT_TIME_UNSPECIFIED",b="UNSUPPORTED_UTC_TIMING_SCHEME",h=function(e){var t=e.baseUrl,n=void 0===t?"":t,r=e.source,a=void 0===r?"":r,u=e.range,o=void 0===u?"":u,s=e.indexRange,d=void 0===s?"":s,c={uri:a,resolvedUri:i(n||"",a)};if(o||d){var l=(o||d).split("-"),f=parseInt(l[0],10),m=parseInt(l[1],10);c.byterange={length:m-f+1,offset:f}}return c},U={static:function(e){var t=e.duration,n=e.timescale,r=void 0===n?1:n,i=e.sourceDuration;return{start:0,end:Math.ceil(i/(t/r))}},dynamic:function(e){var t=e.NOW,n=e.clientOffset,r=e.availabilityStartTime,i=e.timescale,a=void 0===i?1:i,u=e.duration,o=e.start,s=void 0===o?0:o,d=e.minimumUpdatePeriod,c=void 0===d?0:d,l=e.timeShiftBufferDepth,f=void 0===l?1/0:l,m=(t+n)/1e3,p=r+s,v=m+c-p,g=Math.ceil(v*a/u),b=Math.floor((m-p-f)*a/u),h=Math.floor((m-p)*a/u);return{start:Math.max(0,b),end:Math.min(g,h)}}},I=function(e){var t=e.type,n=void 0===t?"static":t,r=e.duration,i=e.timescale,a=void 0===i?1:i,u=e.sourceDuration,o=U[n](e),s=function(e,t){for(var n=[],r=e;r<t;r++)n.push(r);return n}(o.start,o.end).map(function(e){return function(t,n){var r=e.duration,i=e.timescale,a=void 0===i?1:i,u=e.periodIndex,o=e.startNumber;return{number:(void 0===o?1:o)+t,duration:r/a,timeline:u,time:n*r}}}(e));if("static"===n){var d=s.length-1;s[d].duration=u-r/a*d}return s},D=function(e){var t=e.baseUrl,n=e.initialization,r=void 0===n?{}:n,i=e.sourceDuration,a=e.indexRange,u=void 0===a?"":a,o=e.duration;if(!t)throw new Error(v);var s=h({baseUrl:t,source:r.sourceURL,range:r.range}),d=h({baseUrl:t,source:t,indexRange:u});if(d.map=s,o){var c=I(e);c.length&&(d.duration=c[0].duration,d.timeline=c[0].timeline)}else i&&(d.duration=i,d.timeline=0);return d.number=0,[d]},y=function(e,t,n){for(var r=e.sidx.map?e.sidx.map:null,i=e.sidx.duration,a=e.timeline||0,u=e.sidx.byterange,o=u.offset+u.length,s=t.timescale,d=t.references.filter((function(e){return 1!==e.referenceType})),c=[],l=o+t.firstOffset,f=0;f<d.length;f++){var m=t.references[f],p=m.referencedSize,v=m.subsegmentDuration,g=D({baseUrl:n,timescale:s,timeline:a,periodIndex:a,duration:v,sourceDuration:i,indexRange:l+"-"+(l+p-1)})[0];r&&(g.map=r),c.push(g),l+=p}return e.segments=c,e},T=function(e){var t;return(t=e.reduce((function(e,t){var n,r=t.attributes.id+(t.attributes.lang||"");return e[r]?(t.segments[0]&&(t.segments[0].discontinuity=!0),(n=e[r].segments).push.apply(n,t.segments),t.attributes.contentProtection&&(e[r].attributes.contentProtection=t.attributes.contentProtection)):e[r]=t,e}),{}),Object.keys(t).map((function(e){return t[e]}))).map((function(e){var t,n;return e.discontinuityStarts=(t=e.segments,n="discontinuity",t.reduce((function(e,t,r){return t[n]&&e.push(r),e}),[])),e}))},E=function(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var n in e){var r=e[n];if(r.sidx){var i=r.sidx.uri+"-"+(u=r.sidx.byterange,o=void 0,o=u.offset+u.length-1,u.offset+"-"+o),a=t[i]&&t[i].sidx;r.sidx&&a&&y(r,a,r.sidx.resolvedUri)}}var u,o;return e},S=function(e){var t,n=e.attributes,r=e.segments,i=e.sidx,a={attributes:(t={NAME:n.id,BANDWIDTH:n.bandwidth,CODECS:n.codecs},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:r,mediaSequence:r.length?r[0].number:1};return n.contentProtection&&(a.contentProtection=n.contentProtection),i&&(a.sidx=i),a},x=function(e){var t,n=e.attributes,r=e.segments;"undefined"===typeof r&&(r=[{uri:n.baseUrl,timeline:n.periodIndex,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration);var i=((t={NAME:n.id,BANDWIDTH:n.bandwidth})["PROGRAM-ID"]=1,t);return n.codecs&&(i.CODECS=n.codecs),{attributes:i,uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:n.baseUrl||"",targetDuration:n.duration,segments:r,mediaSequence:r.length?r[0].number:1}},O=function(e){var t,n=e.attributes,r=e.segments,i=e.sidx,a={attributes:(t={NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:r,mediaSequence:r.length?r[0].number:1};return n.contentProtection&&(a.contentProtection=n.contentProtection),i&&(a.sidx=i),a},P=function(e,t,n){var r;if(void 0===n&&(n={}),!e.length)return{};var i=e[0].attributes,a=i.sourceDuration,u=i.type,o=void 0===u?"static":u,s=i.suggestedPresentationDelay,d=i.minimumUpdatePeriod,c=T(e.filter((function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video"===t.contentType}))).map(O),l=T(e.filter((function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio"===t.contentType}))),f=e.filter((function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType})),m={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(r={AUDIO:{},VIDEO:{}},r["CLOSED-CAPTIONS"]={},r.SUBTITLES={},r),uri:"",duration:a,playlists:E(c,n)};return d>=0&&(m.minimumUpdatePeriod=1e3*d),t&&(m.locations=t),"dynamic"===o&&(m.suggestedPresentationDelay=s),l.length&&(m.mediaGroups.AUDIO.audio=function(e,t){var n;void 0===t&&(t={});var r=e.reduce((function(e,r){var i=r.attributes.role&&r.attributes.role.value||"",a=r.attributes.lang||"",u="main";if(a){var o=i?" ("+i+")":"";u=""+r.attributes.lang+o}return e[u]&&e[u].playlists[0].attributes.BANDWIDTH>r.attributes.bandwidth||(e[u]={language:a,autoselect:!0,default:"main"===i,playlists:E([S(r)],t),uri:""},"undefined"===typeof n&&"main"===i&&((n=r).default=!0)),e}),{});return n||(r[Object.keys(r)[0]].default=!0),r}(l,n)),f.length&&(m.mediaGroups.SUBTITLES.subs=function(e,t){return void 0===t&&(t={}),e.reduce((function(e,n){var r=n.attributes.lang||"text";return e[r]||(e[r]={language:r,default:!1,autoselect:!1,playlists:E([x(n)],t),uri:""}),e}),{})}(f,n)),m},N=function(e,t,n){var r=e.NOW,i=e.clientOffset,a=e.availabilityStartTime,u=e.timescale,o=void 0===u?1:u,s=e.start,d=void 0===s?0:s,c=e.minimumUpdatePeriod,l=(r+i)/1e3+(void 0===c?0:c)-(a+d);return Math.ceil((l*o-t)/n)},w=function(e,t){for(var n=e.type,r=void 0===n?"static":n,i=e.minimumUpdatePeriod,a=void 0===i?0:i,u=e.media,o=void 0===u?"":u,s=e.sourceDuration,d=e.timescale,c=void 0===d?1:d,l=e.startNumber,f=void 0===l?1:l,m=e.periodIndex,p=[],v=-1,g=0;g<t.length;g++){var b=t[g],h=b.d,U=b.r||0,I=b.t||0;v<0&&(v=I),I&&I>v&&(v=I);var D=void 0;if(U<0){var y=g+1;D=y===t.length?"dynamic"===r&&a>0&&o.indexOf("$Number$")>0?N(e,v,h):(s*c-v)/h:(t[y].t-v)/h}else D=U+1;for(var T=f+p.length+D,E=f+p.length;E<T;)p.push({number:E,duration:h/c,time:v,timeline:m}),v+=h,E++}return p},R=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,A=function(e,t){return e.replace(R,function(e){return function(t,n,r,i){if("$$"===t)return"$";if("undefined"===typeof e[n])return t;var a=""+e[n];return"RepresentationID"===n?a:(i=r?parseInt(i,10):1,a.length>=i?a:""+new Array(i-a.length+1).join("0")+a)}}(t))},M=function(e,t){var n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},r=e.initialization,a=void 0===r?{sourceURL:"",range:""}:r,u=h({baseUrl:e.baseUrl,source:A(a.sourceURL,n),range:a.range}),o=function(e,t){return e.duration||t?e.duration?I(e):w(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodIndex}]}(e,t);return o.map((function(t){n.Number=t.number,n.Time=t.time;var r=A(e.media||"",n);return{uri:r,timeline:t.timeline,duration:t.duration,resolvedUri:i(e.baseUrl||"",r),map:u,number:t.number}}))},L=function(e,t){var n=e.duration,r=e.segmentUrls,i=void 0===r?[]:r;if(!n&&!t||n&&t)throw new Error(g);var a,u=i.map((function(t){return function(e,t){var n=e.baseUrl,r=e.initialization,i=void 0===r?{}:r,a=h({baseUrl:n,source:i.sourceURL,range:i.range}),u=h({baseUrl:n,source:t.media,range:t.mediaRange});return u.map=a,u}(e,t)}));return n&&(a=I(e)),t&&(a=w(e,t)),a.map((function(e,t){if(u[t]){var n=u[t];return n.timeline=e.timeline,n.duration=e.duration,n.number=e.number,n}})).filter((function(e){return e}))},_=function(e){var t,n,r=e.attributes,i=e.segmentInfo;i.template?(n=M,t=d(r,i.template)):i.base?(n=D,t=d(r,i.base)):i.list&&(n=L,t=d(r,i.list));var a={attributes:r};if(!n)return a;var u=n(t,i.timeline);if(t.duration){var o=t,s=o.duration,c=o.timescale,l=void 0===c?1:c;t.duration=s/l}else u.length?t.duration=u.reduce((function(e,t){return Math.max(e,Math.ceil(t.duration))}),0):t.duration=0;return a.attributes=t,a.segments=u,i.base&&t.indexRange&&(a.sidx=u[0],a.segments=[]),a},C=function(e){return e.map(_)},B=function(e,t){return l(e.childNodes).filter((function(e){return e.tagName===t}))},k=function(e){return e.textContent.trim()},z=function(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;var n=t.slice(1),r=n[0],i=n[1],a=n[2],u=n[3],o=n[4],s=n[5];return 31536e3*parseFloat(r||0)+2592e3*parseFloat(i||0)+86400*parseFloat(a||0)+3600*parseFloat(u||0)+60*parseFloat(o||0)+parseFloat(s||0)},F={mediaPresentationDuration:function(e){return z(e)},availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:function(e){return z(e)},suggestedPresentationDelay:function(e){return z(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return z(e)},start:function(e){return z(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?z(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},j=function(e){return e&&e.attributes?l(e.attributes).reduce((function(e,t){var n=F[t.name]||F.DEFAULT;return e[t.name]=n(t.value),e}),{}):{}},G={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},H=function(e,t){return t.length?c(e.map((function(e){return t.map((function(t){return i(e,k(t))}))}))):e},W=function(e){var t=B(e,"SegmentTemplate")[0],n=B(e,"SegmentList")[0],r=n&&B(n,"SegmentURL").map((function(e){return d({tag:"SegmentURL"},j(e))})),i=B(e,"SegmentBase")[0],a=n||t,u=a&&B(a,"SegmentTimeline")[0],o=n||i||t,s=o&&B(o,"Initialization")[0],c=t&&j(t);c&&s?c.initialization=s&&j(s):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});var l={template:c,timeline:u&&B(u,"S").map((function(e){return j(e)})),list:n&&d(j(n),{segmentUrls:r,initialization:j(s)}),base:i&&d(j(i),{initialization:j(s)})};return Object.keys(l).forEach((function(e){l[e]||delete l[e]})),l},$=function(e,t,n){return function(r){var i=j(r),a=H(t,B(r,"BaseURL")),o=B(r,"Role")[0],s={role:j(o)},l=d(e,i,s),f=B(r,"ContentProtection").reduce((function(e,t){var n=j(t),r=G[n.schemeIdUri];if(r){e[r]={attributes:n};var i=B(t,"cenc:pssh")[0];if(i){var a=k(i),o=a&&u(a);e[r].pssh=o}}return e}),{});Object.keys(f).length&&(l=d(l,{contentProtection:f}));var m=W(r),p=B(r,"Representation"),v=d(n,m);return c(p.map(function(e,t,n){return function(r){var i=B(r,"BaseURL"),a=H(t,i),u=d(e,j(r)),o=W(r);return a.map((function(e){return{segmentInfo:d(n,o),attributes:d(u,{baseUrl:e})}}))}}(l,a,v)))}},q=function(e,t){return function(n,r){var i=H(t,B(n,"BaseURL")),u=j(n),o=parseInt(u.id,10),s=a.isNaN(o)?r:o,l=d(e,{periodIndex:s}),f=B(n,"AdaptationSet"),m=W(n);return c(f.map($(l,i,m)))}},V=function(e,t){void 0===t&&(t={});var n=t,r=n.manifestUri,i=void 0===r?"":r,a=n.NOW,u=void 0===a?Date.now():a,o=n.clientOffset,s=void 0===o?0:o,d=B(e,"Period");if(!d.length)throw new Error(f);var l=B(e,"Location"),m=j(e),p=H([i],B(e,"BaseURL"));return m.sourceDuration=m.mediaPresentationDuration||0,m.NOW=u,m.clientOffset=s,l.length&&(m.locations=l.map(k)),{locations:m.locations,representationInfo:c(d.map(q(m,p)))}},X=function(e){if(""===e)throw new Error(m);var t=(new o.DOMParser).parseFromString(e,"application/xml"),n=t&&"MPD"===t.documentElement.tagName?t.documentElement:null;if(!n||n&&n.getElementsByTagName("parsererror").length>0)throw new Error(p);return n};t.VERSION="0.14.0",t.inheritAttributes=V,t.parse=function(e,t){void 0===t&&(t={});var n=V(X(e),t),r=C(n.representationInfo);return P(r,n.locations,t.sidxMapping)},t.parseUTCTiming=function(e){return function(e){var t=B(e,"UTCTiming")[0];if(!t)return null;var n=j(t);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;default:throw new Error(b)}return n}(X(e))},t.stringToMpdXml=X,t.toM3u8=P,t.toPlaylists=C}}]);